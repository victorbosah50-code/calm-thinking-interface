<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Calm Thinking ‚Äì A Therapeutic Space</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;height:100%;
  font-family:'Nunito',sans-serif;
  background:#000;overflow:hidden;
}
#background{
  position:fixed;inset:0;
  background:linear-gradient(to top,#0c2f3f,#000);
  z-index:-3;
}
.rain{position:fixed;inset:0;pointer-events:none;z-index:-2}
.drop{
  position:absolute;width:2px;height:18px;
  background:rgba(255,255,255,.35);
  animation:fall linear infinite;
}
@keyframes fall{to{transform:translateY(110vh)}}

.container{
  max-width:850px;margin:40px auto;
  padding:32px;background:rgba(255,255,255,.28);
  backdrop-filter:blur(14px);
  border-radius:22px;color:#000;
  text-align:center;
}
textarea{
  width:100%;height:120px;
  padding:14px;border-radius:14px;
  border:2px solid #7fd3e8;
  font-family:Nunito;font-size:1rem;
}
button{
  padding:12px 26px;margin:10px;
  border:none;border-radius:18px;
  background:#4a90e2;color:#fff;
  font-size:1rem;cursor:pointer;
}
.card{
  background:rgba(255,255,255,.35);
  padding:22px;border-radius:20px;
  margin-top:18px;
}
.breath{
  width:190px;height:190px;border-radius:50%;
  background:radial-gradient(circle,#b3e5fc,#81d4fa);
  margin:22px auto;
  display:flex;align-items:center;justify-content:center;
  font-size:1.4rem;font-weight:700;
  transition:2.5s;
}
.expand{transform:scale(1.75)}
.small{font-size:.95rem;opacity:.85}
</style>
</head>

<body>

<div id="background"></div>
<div class="rain" id="rain"></div>

<div class="container" id="app">
  <h1>üåø Calm Thinking</h1>
  <p>A quiet, supportive space to slow down and reconnect.</p>
  <button id="startBtn">Begin Session</button>
</div>

<audio id="ambience" loop src="https://www.orangefreesounds.com/wp-content/uploads/2016/04/Rainforest-sounds.mp3"></audio>

<script>
const app=document.getElementById("app");
const ambience=document.getElementById("ambience");
const rain=document.getElementById("rain");

let step=0;

/* ---------- RAIN ---------- */
for(let i=0;i<140;i++){
  const d=document.createElement("div");
  d.className="drop";
  d.style.left=Math.random()*100+"%";
  d.style.animationDuration=(0.7+Math.random())+"s";
  d.style.animationDelay=Math.random()*6+"s";
  rain.appendChild(d);
}

/* ---------- FLOW ---------- */
const flow=[
 "What has been occupying your thoughts lately?",
 "What feels emotionally heavy right now?",
 "What part of this situation is outside your control?",
 "What part is still within your control?",
 "BREATH",
 "What is one kind thing you can offer yourself today?"
];

startBtn.onclick=()=>{
  ambience.volume=.45;
  ambience.play();
  renderStep();
};

function renderStep(){
  if(step>=flow.length){ conclusion(); return; }

  if(flow[step]==="BREATH"){ breathing(); return; }

  app.innerHTML=`
    <h2>${flow[step]}</h2>
    <textarea placeholder="Write freely. No judgment."></textarea>
    <button>Continue</button>
  `;

  app.querySelector("button").onclick=()=>{
    const text=app.querySelector("textarea").value.trim();
    if(!text){alert("Even a few words are enough.");return;}
    therapeuticExercise(step);
  };
}

/* ---------- THERAPEUTIC BRAINSTORMING ---------- */
function therapeuticExercise(i){
  const prompts=[
    "Gently unload your thoughts. Write anything that comes to mind without organizing it.",
    "Rewrite one thought in a kinder, softer way ‚Äî as if supporting a friend.",
    "List what you cannot control, then mentally place it aside.",
    "Name one small focus that would bring steadiness right now.",
    "",
    "Brainstorm small ways to care for yourself in the next 24 hours."
  ];

  app.innerHTML=`
    <div class="card">
      <h3>üß† Therapeutic Focus</h3>
      <p>${prompts[i]}</p>
      <textarea placeholder="There is no right or wrong response."></textarea>
      <button>Continue</button>
    </div>
  `;

  app.querySelector("button").onclick=()=>{
    step++;
    renderStep();
  };
}

/* ---------- BREATHING ---------- */
function breathing(){
  let phase=0;
  app.innerHTML=`
    <h2>üåå Guided Breathing</h2>
    <p class="small">Follow the rhythm. Nothing else to do.</p>
    <div class="breath" id="b">Inhale</div>
    <button>Continue</button>
  `;
  const b=document.getElementById("b");
  const t=setInterval(()=>{
    if(phase===0){b.textContent="Inhale";b.classList.add("expand")}
    if(phase===1){b.textContent="Hold"}
    if(phase===2){b.textContent="Exhale";b.classList.remove("expand")}
    phase=(phase+1)%3;
  },2200);

  app.querySelector("button").onclick=()=>{
    clearInterval(t);
    step++;
    renderStep();
  };
}

/* ---------- CONCLUSION ---------- */
function conclusion(){
  const quotes=[
    "You don‚Äôt have to fight your thoughts. Let them pass like clouds.",
    "Gentle progress is still progress.",
    "Healing begins the moment you stop being harsh with yourself."
  ];
  const idioms=[
    {i:"Take it one step at a time",m:"Focus on the present moment instead of the whole journey."},
    {i:"This too shall pass",m:"No feeling or situation lasts forever."}
  ];
  const parables=[
    "A man complained the room was dark. Instead of cursing the darkness, he lit a candle.",
    "A cracked pot still carried water ‚Äî and along the path, flowers grew."
  ];

  const q=quotes[Math.floor(Math.random()*quotes.length)];
  const id=idioms[Math.floor(Math.random()*idioms.length)];
  const p=parables[Math.floor(Math.random()*parables.length)];

  app.innerHTML=`
    <h2>üå± Session Complete</h2>
    <p>You showed up for yourself today. That alone is meaningful.</p>

    <div class="card">
      <h3>üí¨ Quote of the Day</h3>
      <p><em>${q}</em></p>
    </div>

    <div class="card">
      <h3>üó£Ô∏è Idiom of the Day</h3>
      <p><strong>${id.i}</strong><br>${id.m}</p>
    </div>

    <div class="card">
      <h3>üìú Parable of the Day</h3>
      <p>${p}</p>
    </div>

    <p class="small">Carry this calm with you. You can return anytime.</p>
  `;
}
</script>
</body>
</html>
