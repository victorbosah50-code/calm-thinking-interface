<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ¿ Calm Thinking + Games ğŸŒ¿</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
<style>
body, html { margin:0; padding:0; width:100%; height:100%; font-family:'Nunito',sans-serif; display:flex; justify-content:center; align-items:center; background:#000; overflow:hidden; }
.container { position:relative; z-index:1; max-width:800px; width:95%; background:rgba(255,255,255,0.25); backdrop-filter: blur(10px); padding:30px; border-radius:16px; box-shadow:0 8px 25px rgba(0,0,0,0.4); display:flex; flex-direction:column; align-items:center; text-align:center; color:#000; }
h1 { font-size:2rem; margin-bottom:15px; opacity:0; animation:fadeBounce 1.5s forwards; }
p { line-height:1.6; font-size:1.1rem; color:#000; }
textarea { width:100%; height:100px; margin:15px 0; padding:12px; border-radius:10px; border:2px solid #a0d8ef; font-family:'Nunito'; font-size:1rem; resize:vertical; background:rgba(255,255,255,0.9); color:#000; }
button { padding:12px 24px; margin:10px; font-size:1rem; border:none; border-radius:10px; background:#4a90e2; color:#fff; cursor:pointer; transition:transform 0.2s,box-shadow 0.2s; }
button:hover { transform:scale(1.05); box-shadow:0 4px 15px rgba(74,144,226,0.4); }
.breathing-circle { width:180px; height:180px; border-radius:50%; background:radial-gradient(circle,#a8edea,#89dceb); display:flex; align-items:center; justify-content:center; color:black; font-weight:600; font-size:1.5rem; margin:20px auto; cursor:pointer; transition:all 1s linear; }
.breathing-circle.expanding { transform:scale(1.8); background:radial-gradient(circle,#fed6e3,#fcb7d2);}
.game-area { margin:15px 0; padding:15px; background:rgba(255,255,255,0.2); border-radius:12px; width:100%; text-align:center; color:#000; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);}
canvas { background:green; border-radius:12px; margin-top:15px; }
@keyframes fadeBounce {0%{opacity:0;transform:translateY(-20px);}50%{opacity:1;transform:translateY(8px);}100%{opacity:1;transform:translateY(0);} }
</style>
</head>
<body>

<div class="container" id="mainContainer">
  <h1>ğŸŒ¿ Welcome to Calm Thinking ğŸŒ¿</h1>
  <p>Take a deep breath and reflect on your thoughts. Press "Start" to begin!</p>
  <button id="startButton">Start</button>
</div>

<script>
const container = document.getElementById("mainContainer");
const startButton = document.getElementById("startButton");
let currentStep = 0;
const responses = [];
let breathingInterval;

// Steps
const steps = [
  {title:"Focus", reflection:true},
  {title:"Facts", reflection:true},
  {title:"Assumptions", reflection:true},
  {title:"Control", reflection:true},
  {title:"Breathing", reflection:false, breathing:true},
  {title:"Next Step", reflection:true},
  {title:"Conclusion", reflection:false}
];

startButton.onclick = () => { renderStep(); };

// --- Render Steps ---
function renderStep(){
  if(currentStep>=steps.length){ showConclusion(); return; }
  const step = steps[currentStep];
  container.innerHTML=`<h1>${step.title}</h1>`;
  if(step.reflection){
    const textarea=document.createElement("textarea"); textarea.placeholder="Type here..."; container.appendChild(textarea);
    const btn=document.createElement("button"); btn.innerText="Next"; btn.onclick=()=>{
      if(textarea.value.trim()===""){ alert("Enter response"); return; }
      responses.push({step:step.title,input:textarea.value});
      renderRandomGame(textarea.value);
    }; container.appendChild(btn);
  } else if(step.breathing){
    startBreathingExercise();
  } else { currentStep++; renderStep(); }
}

// --- Breathing ---
function startBreathingExercise(){
  const circle=document.createElement("div"); circle.className="breathing-circle"; circle.innerText="Breathe"; container.appendChild(circle);
  let inhale=4000, hold=7000, exhale=8000;
  let step=0;
  breathingInterval=setInterval(()=>{
    if(step===0){ circle.innerText="Inhale"; circle.classList.add("expanding"); step=1; }
    else if(step===1){ circle.innerText="Hold"; step=2; }
    else{ circle.innerText="Exhale"; circle.classList.remove("expanding"); step=0; }
  }, inhale+hold+exhale);
  const nextBtn=document.createElement("button"); nextBtn.innerText="Next"; nextBtn.onclick=()=>{
    clearInterval(breathingInterval); currentStep++; renderStep();
  }; container.appendChild(nextBtn);
}

// --- Random Mini-Games ---
function renderRandomGame(input){
  const games=[renderScrabbleGame, renderFocusGame];
  const gameFunc=games[Math.floor(Math.random()*games.length)];
  gameFunc(input);
}

// --- Scrabble Game ---
function renderScrabbleGame(input){ 
  container.innerHTML=`<h1>ğŸ…‚ğŸ…‚ğŸ…ğŸ„°ğŸ„±ğŸ„±ğŸ„»ğŸ„´ Challenge</h1>`;
  alert("Scrabble mini-game coming soon!");
  currentStep++; renderStep();
}

// --- Focus Game ---
function renderFocusGame(input){
  container.innerHTML=`<h1>ğŸ¯ Focus Game</h1>`;
  alert("Focus mini-game coming soon!");
  currentStep++; renderStep();
}

// --- Conclusion ---
function showConclusion(){
  container.innerHTML=`<h1>ğŸ‰ Congratulations! ğŸ‰</h1>`;
  const summary=document.createElement("div");
  summary.innerHTML=responses.map(r=>`<strong>${r.step}:</strong> ${r.input}`).join("<br>")+
    `<br><br>ğŸ® Play More Games!`;
  container.appendChild(summary);

  // Post-Journey Game Hub
  const hub=document.createElement("div");
  const boardBtn=document.createElement("button"); boardBtn.innerText="Board Games"; boardBtn.onclick=playBoardGames;
  const basketballBtn=document.createElement("button"); basketballBtn.innerText="Basketball Focus"; basketballBtn.onclick=playBasketball;
  const poolBtn=document.createElement("button"); poolBtn.innerText="8-Ball Pool"; poolBtn.onclick=playPool;
  hub.appendChild(boardBtn); hub.appendChild(basketballBtn); hub.appendChild(poolBtn);
  container.appendChild(hub);
}

// --- Board Games Placeholder ---
function playBoardGames(){ alert("Tic-Tac-Toe / Board Game coming soon!"); }

// --- Basketball Placeholder ---
function playBasketball(){ alert("Basketball Focus Game coming soon!"); }

// --- 8-Ball Pool ---
function playPool(){
  container.innerHTML=`<h1>ğŸ± 8-Ball Pool ğŸ±</h1>`;
  const canvas=document.createElement("canvas"); canvas.width=700; canvas.height=350; container.appendChild(canvas);
  const ctx=canvas.getContext("2d");

  const BALL_RADIUS=12;
  const pockets=[{x:0,y:0},{x:canvas.width/2,y:0},{x:canvas.width,y:0},{x:0,y:canvas.height},{x:canvas.width/2,y:canvas.height},{x:canvas.width,y:canvas.height}];
  let balls=[];
  const colors=["yellow","blue","red","purple","orange","green","maroon","black","yellow","blue","red","purple","orange","green","maroon"];
  for(let i=0;i<16;i++){ balls.push({x:0,y:0,vx:0,vy:0,color:colors[i],pocketed:false}); }

  // Triangle formation for balls
  let startX=canvas.width*0.7, startY=canvas.height/2;
  let idx=1;
  for(let r=0;r<5;r++){
    for(let c=0;c<=r;c++){
      balls[idx].x=startX+r*BALL_RADIUS*2;
      balls[idx].y=startY-(r*BALL_RADIUS)+c*BALL_RADIUS*2;
      idx++; if(idx>=balls.length) break;
    }
  }
  balls[0].x=canvas.width*0.3; balls[0].y=canvas.height/2; // cue ball

  let aiming=false, aimStart={x:0,y:0};
  canvas.onmousedown=e=>{ aiming=true; aimStart={x:e.offsetX,y:e.offsetY}; };
  canvas.onmouseup=e=>{
    if(!aiming) return; aiming=false;
    const dx=aimStart.x-e.offsetX; const dy=aimStart.y-e.offsetY;
    balls[0].vx=dx/5; balls[0].vy=dy/5;
  };

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="green"; ctx.fillRect(0,0,canvas.width,canvas.height);
    balls.forEach(b=>{
      if(b.pocketed) return;
      ctx.beginPath();
      ctx.arc(b.x,b.y,BALL_RADIUS,0,Math.PI*2);
      ctx.fillStyle=b.color; ctx.fill(); ctx.strokeStyle="black"; ctx.stroke();
    });
  }

  function update(){
    balls.forEach(b=>{
      if(b.pocketed) return;
      b.x+=b.vx; b.y+=b.vy;
      b.vx*=0.98; b.vy*=0.98;
      if(b.x<BALL_RADIUS || b.x>canvas.width-BALL_RADIUS) b.vx*=-1;
      if(b.y<BALL_RADIUS || b.y>canvas.height-BALL_RADIUS) b.vy*=-1;
      pockets.forEach(p=>{
        const dx=b.x-p.x; const dy=b.y-p.y;
        if(Math.sqrt(dx*dx+dy*dy)<BALL_RADIUS+5){ b.pocketed=true; }
      });
    });
  }

  function loop(){ update(); draw(); requestAnimationFrame(loop); }
  loop();
}
</script>
</body>
</html>
