<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŒ¿ Calm Thinking Interface ðŸŒ¿</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
<style>
  /* General styles */
  body, html {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    font-family: 'Nunito', sans-serif;
    overflow: hidden;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Video background */
  #bgVideo {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    object-fit: cover;
    z-index: -2;
    opacity: 0.6;
  }

  /* Container */
  .container {
    position: relative;
    z-index: 1;
    max-width: 700px;
    width: 90%;
    background: rgba(255,255,255,0.88);
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  h1 {
    font-size: 2rem;
    margin-bottom: 20px;
    opacity: 0;
    animation: fadeBounce 1.5s forwards;
  }

  p { line-height: 1.6; font-size: 1.1rem; }

  button {
    margin-top: 20px;
    padding: 12px 24px;
    font-size: 1rem;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background-color: #4a90e2;
    color: white;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  button:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(74,144,226,0.4);
  }

  .footer {
    font-size: 0.8rem;
    color: #444;
    margin-top: 25px;
  }

  .summary {
    background-color: rgba(255,255,255,0.96);
    padding: 28px;
    border-radius: 16px;
    margin-top: 25px;
    white-space: pre-wrap;
    font-size: 1rem;
    line-height: 1.7;
    opacity: 0;
    transition: opacity 1s;
  }

  @keyframes fadeBounce {
    0% { opacity: 0; transform: translateY(-20px);}
    50% { opacity: 1; transform: translateY(8px);}
    100% { opacity: 1; transform: translateY(0);}
  }
</style>
</head>
<body>

<!-- Nature video background (replace with desired video URL) -->
<video autoplay muted loop id="bgVideo">
  <!-- Example: ocean waves video -->
  <source src="https://www.mixkit.co/free-stock-video/ocean-waves.mp4" type="video/mp4">
</video>

<div class="container">
  <h1 id="title">ðŸŒ¿ Welcome to Calm Thinking ðŸŒ¿</h1>
  <p id="prompt">Take a deep breath and get ready for a peaceful reflection journey. Press "Start" to begin! ðŸ˜Š</p>
  <button id="startButton" onclick="startReflection()">Start</button>

  <div class="footer">This tool supports reflection only. No data is saved or tracked.</div>
</div>

<script>
// Initial state
let currentStep = 0;
const responses = [];

// Steps for reflection
const steps = [
  { title: "Focus", text: "Whatâ€™s on your mind right now?", reflection: true, followup: "Letâ€™s dive deeper." },
  { title: "Facts", text: "What facts do you know for sure?", reflection: true, followup: "Facts help clear the mind." },
  { title: "Assumptions", text: "What assumptions are you making?", reflection: true, followup: "Challenge your assumptions." },
  { title: "Control", text: "What can you control in this situation?", reflection: true, followup: "Focus on what you can influence." },
  { title: "Time", text: "If you waited 24 hours, what would change?", reflection: true, followup: "Time gives perspective." },
  { title: "Next Step", text: "What is one small step you can take?", reflection: true, followup: "Every small step counts." },
  { title: "Brain Game", text: "Letâ€™s have some fun before we conclude!", reflection: false },
  { title: "Mood", text: "How are you feeling now? (Calm, Neutral, Stressed, Thoughtful)", reflection: false },
  { title: "Conclusion", text: "", reflection: false }
];

// Start reflection journey
function startReflection() {
  document.getElementById("startButton").style.display = "none";
  document.getElementById("title").style.opacity = 1;
  renderStep();
}

// Render each step
function renderStep() {
  const step = steps[currentStep];
  const container = document.querySelector(".container");

  // Clear container except the title and footer
  container.innerHTML = `<h1 id="title">${step.title}</h1><div class="footer">This tool supports reflection only. No data is saved or tracked.</div>`;

  // Set prompt text
  const prompt = document.createElement("p");
  prompt.id = "prompt";
  prompt.innerText = step.text;
  container.appendChild(prompt);

  // Add input area and next button if needed
  if (step.title !== "Brain Game" && step.title !== "Conclusion" && step.title !== "Mood") {
    const inputArea = document.createElement("textarea");
    inputArea.placeholder = "Type here...";
    container.appendChild(inputArea);

    const nextButton = document.createElement("button");
    nextButton.innerText = "Next";
    nextButton.onclick = () => nextStep(inputArea.value.trim(), inputArea);
    container.appendChild(nextButton);
  } else if (step.title === "Brain Game") {
    // Trigger brain game logic
    setTimeout(() => {
      promptBrainGame();
    }, 500);
  } else if (step.title === "Mood") {
    // Add mood selection
    const moodOptions = ["Calm", "Neutral", "Stressed", "Thoughtful"];
    moodOptions.forEach(mood => {
      const button = document.createElement("button");
      button.innerText = mood;
      button.onclick = () => nextStep(mood, null);
      container.appendChild(button);
    });
  } else if (step.title === "Conclusion") {
    // Show conclusion
    showConclusion();
  }
}

// Handle the next step
function nextStep(userInput, inputArea) {
  const step = steps[currentStep];

  if (step.reflection && userInput === "") {
    alert("Please type something to continue.");
    return;
  }

  if (step.reflection) {
    responses.push({ step: step.title, input: userInput });
  }

  if (step.title === "Mood") {
    // Change background based on mood
    document.body.style.background = getMoodGradient(userInput);
  }

  currentStep++;
  // Clear previous input and button
  if (inputArea) inputArea.remove();
  const buttons = document.querySelectorAll("button");
  buttons.forEach(btn => btn.remove());

  // Render the next step or conclusion
  if (currentStep < steps.length) {
    renderStep();
  } else {
    showConclusion();
  }
}

// Mood-based gradient
function getMoodGradient(mood) {
  const gradients = {
    Calm: "linear-gradient(135deg, #a8edea, #fed6e3)",
    Neutral: "linear-gradient(135deg, #f0f4f8, #d9e2ec)",
    Stressed: "linear-gradient(135deg, #ff9a9e, #fecfef)",
    Thoughtful: "linear-gradient(135deg, #cfd9df, #e2ebf0)"
  };
  return gradients[mood] || gradients["Neutral"];
}

// Brain game (multiple-choice, memory, logic)
function promptBrainGame() {
  const container = document.querySelector(".container");
  container.innerHTML = `<h1 id="title">ðŸ§  Brain Game ðŸ§ </h1>`;

  // Multiple-choice question
  const mcQuestion = document.createElement("p");
  mcQuestion.innerText = "What is the capital of France?";
  container.appendChild(mcQuestion);

  const options = ["Paris", "London", "Rome", "Berlin"];
  options.forEach(option => {
    const button = document.createElement("button");
    button.innerText = option;
    button.onclick = () => handleMCAnswer(option);
    container.appendChild(button);
  });
}

// Handle multiple-choice answer
function handleMCAnswer(selectedOption) {
  const correctAnswer = "Paris";
  if (selectedOption === correctAnswer) {
    alert("Correct! Now letâ€™s move on.");
    nextStep("", null); // Move to next step
  } else {
    alert("Oops! Thatâ€™s not correct. Try again.");
  }
}

// Show conclusion
function showConclusion() {
  const container = document.querySelector(".container");
  container.innerHTML = `<div class="summary">ðŸŒˆ Your Reflection Journey ðŸŒˆ\n\n${responses.map(r => `${r.step}: ${r.input}`).join("\n")}\n\nðŸ’– Take a deep breath, smile, and feel calm! ðŸ’–\nYouâ€™ve reflected, played fun games, and found clarity. Every step you take is progress. ðŸ˜ŠðŸŒ¸</div>`;
}

</script>
</body>
</html>
