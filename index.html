<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŒŸ Calm Thinking Interface ðŸŒŸ</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
<style>
  /* ===== Global Styles ===== */
  body, html {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    font-family: 'Nunito', sans-serif;
    overflow: hidden;
    display: flex; justify-content: center; align-items: center;
    background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
    transition: background 1s ease;
  }

  /* ===== Particle Canvas ===== */
  #particleCanvas {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
  }

  /* ===== Container ===== */
  .container {
    position: relative;
    z-index: 1;
    max-width: 650px;
    width: 90%;
    background: rgba(255,255,255,0.88);
    padding: 35px;
    border-radius: 16px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    text-align: center;
    overflow: hidden;
  }

  h1 {
    font-size: 2rem;
    margin-bottom: 20px;
    opacity: 0;
    animation: fadeBounce 1.5s forwards;
  }

  p { line-height: 1.6; font-size: 1.1rem; }

  textarea {
    width: 100%;
    height: 100px;
    margin-top: 20px;
    font-size: 1rem;
    padding: 12px;
    resize: none;
    border-radius: 8px;
    border: 1px solid #ccc;
    transition: box-shadow 0.3s;
  }

  textarea:focus {
    outline: none;
    box-shadow: 0 0 10px #4a90e2;
  }

  button {
    margin-top: 20px;
    padding: 12px 20px;
    font-size: 1rem;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background-color: #4a90e2;
    color: white;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  button:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(74,144,226,0.4);
  }

  .footer {
    font-size: 0.8rem; color: #555;
    margin-top: 25px;
  }

  .summary {
    background-color: rgba(238,245,249,0.95); 
    padding: 25px; 
    border-radius: 16px; 
    margin-top: 25px; 
    white-space: pre-wrap; 
    font-size: 1.05rem;
    line-height: 1.7;
    opacity: 0;
  }

  /* ===== Animations ===== */
  @keyframes fadeBounce {
    0% { opacity: 0; transform: translateY(-20px);}
    50% { opacity: 1; transform: translateY(10px);}
    100% { opacity: 1; transform: translateY(0);}
  }

</style>
</head>
<body>

<canvas id="particleCanvas"></canvas>

<div class="container">
  <h1 id="title">ðŸŒŸ Hello, Brilliant Mind! ðŸŒŸ</h1>
  <p id="prompt">Take a deep breath, smile, and get ready for a calm reflection journey. ðŸŒ¸</p>
  <textarea id="input" placeholder="Type here..."></textarea>
  <button onclick="nextStep()">Letâ€™s Begin</button>
  <div class="footer">
    This tool supports reflection only. No data is saved or tracked.
  </div>
</div>

<script>
// ===== Particle Engine =====
const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
let particles = [];

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

function initParticles() {
  particles = [];
  for (let i=0; i<120; i++) {
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      radius: Math.random()*3+1,
      speedX: (Math.random()-0.5)*0.2,
      speedY: (Math.random()-0.5)*0.2
    });
  }
}
initParticles();

function drawParticles() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for (let p of particles) {
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.radius,0,Math.PI*2);
    ctx.fillStyle = "rgba(255,255,255,0.5)";
    ctx.fill();
    p.x += p.speedX;
    p.y += p.speedY;
    if(p.x < 0) p.x = canvas.width;
    if(p.x > canvas.width) p.x = 0;
    if(p.y < 0) p.y = canvas.height;
    if(p.y > canvas.height) p.y = 0;
  }
  requestAnimationFrame(drawParticles);
}
drawParticles();

// ===== User Interaction =====
let current = 0;
const responses = [];

const moodColors = {
  Calm: "linear-gradient(135deg, #a8edea, #fed6e3)",
  Neutral: "linear-gradient(135deg, #f0f4f8, #d9e2ec)",
  Stressed: "linear-gradient(135deg, #ff9a9e, #fecfef)",
  Thoughtful: "linear-gradient(135deg, #cfd9df, #e2ebf0)"
};

const steps = [
  { title:"Introduction", text:"Take a moment to breathe, smile, and get ready for a calm reflection.", reflection:false },
  { title:"Focus", text:"What situation or decision is currently on your mind?", reflection:true, followup:"Youâ€™ve identified this focus. Letâ€™s explore it." },
  { title:"Facts", text:"What facts do you know for certain right now?", reflection:true, followup:"Noting facts clarifies reality separate from assumptions." },
  { title:"Assumptions", text:"What are you assuming might be true?", reflection:true, followup:"Reflecting on assumptions can highlight uncertainties." },
  { title:"Control", text:"Which parts of this situation are within your control? Which are not?", reflection:true, followup:"Focusing on control areas can reduce stress." },
  { title:"Time", text:"If no action were taken for 24 hours, what would realistically change?", reflection:true, followup:"Considering time helps perspective and patience." },
  { title:"Next Step", text:"What is one small, non-urgent step you could take â€” or nothing at all?", reflection:true, followup:"Even a tiny step is progress." },
  { title:"Mood Selection", text:"Before we conclude, how are you feeling now? (Calm, Neutral, Stressed, Thoughtful)", reflection:false },
  { title:"Conclusion", text:"", reflection:false }
];

function renderStep() {
  const step = steps[current];
  document.getElementById("title").innerText = step.title === "Introduction" ? "ðŸŒŸ Hello, Brilliant Mind! ðŸŒŸ" : step.title;
  document.getElementById("prompt").innerText = step.text;
  const inputArea = document.getElementById("input");
  if(step.title === "Conclusion") {
    inputArea.style.display="none";
    document.querySelector("button").style.display="none";
    showSummary();
    return;
  } else {
    inputArea.style.display="block";
  }
  inputArea.value="";
  inputArea.placeholder = step.title==="Mood Selection"?"Type Calm, Neutral, Stressed, or Thoughtful":"Type here...";
}

function nextStep() {
  const step = steps[current];
  const userInput = document.getElementById("input").value.trim();
  if(step.reflection && userInput==="") { alert("Please type something before continuing."); return; }
  if(step.reflection) responses.push({step:step.title,input:userInput});
  if(step.title==="Mood Selection") {
    const gradient = moodColors[userInput] || moodColors["Neutral"];
    document.body.style.background = gradient;
  }
  if(step.reflection) {
    document.getElementById("prompt").innerText = step.followup;
    document.getElementById("input").value="";
    document.querySelector("button").disabled = true;
    setTimeout(()=>{ document.querySelector("button").disabled=false; current++; renderStep(); }, 4000);
  } else { current++; renderStep(); }
}

// ===== Word-by-word conclusion animation =====
function showSummary() {
  const container = document.querySelector(".container");
  const summaryDiv = document.createElement("div");
  summaryDiv.className="summary";
  container.appendChild(summaryDiv);

  const lines = [
    "ðŸŒˆ Your Reflection Journey ðŸŒˆ",
    "",
    ...responses.map(r=>`${r.step}: ${r.input}`),
    "",
    "ðŸ’– Take a deep breath, smile, and feel proud of yourself! ðŸ’–",
    "Youâ€™ve taken time to reflect, notice what you can control, and plan a tiny step forward.",
    "Imagine gentle waves rocking a little boat â€” thatâ€™s your mind now.",
    "Even the smallest mindful action sends ripples of joy and calm.",
    "Remember: You are amazing, and the world is brighter because of your thoughtful heart. ðŸŒ¸ðŸ˜Š"
  ];

  let i=0;
  function showNextLine() {
    if(i<lines.length){
      summaryDiv.innerText += lines[i]+"\n";
      summaryDiv.style.opacity=1;
      i++;
      setTimeout(showNextLine, 600);
    }
  }
  showNextLine();
}

// Initial render
renderStep();
</script>

</body>
</html>
